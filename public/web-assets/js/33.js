(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{I6NS:function(t,e,a){"use strict";a.r(e);var r=a("o0o1"),n=a.n(r),o={name:"DetailsDialog",data:function(){return{dialog:!1,order:{}}},components:{Summary:a("qbkU").a},methods:{open:function(t){this.dialog=!0,this.order=t},close:function(){this.dialog=!1}}},s=a("KHd+");function i(t,e,a,r,n,o,s){try{var i=t[o](s),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(r,n)}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){u(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function u(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var d={data:function(){return{loading:!0,currentPage:1,totalPages:1,orders:[],selectedOrder:{}}},computed:{headers:function(){return[{text:this.$i18n.t("details"),align:"start",sortable:!1,value:"details"},{text:this.$i18n.t("amount"),sortable:!1,value:"grand_total"},{text:this.$i18n.t("options"),align:"end",sortable:!1,value:"options"}]}},components:{DetailsDialog:Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"900px",scrollable:""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.close.apply(null,arguments)}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.is_empty_obj(t.order)?t._e():a("v-card",[a("v-card-title",{staticClass:"grey lighten-3 fs-18 fw-700"},[t._v("\n            "+t._s(t.$t("order_code"))+": "+t._s(t.order.code)+"\n            "),a("button",{staticClass:"ms-auto",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}},[a("i",{staticClass:"la la-close fs-20"})])]),t._v(" "),a("v-card-text",{staticClass:"pa-5"},[a("Summary",{attrs:{"order-details":t.order}})],1)],1)],1)}),[],!1,null,null,null).exports},watch:{currentPage:function(){this.$router.push({query:c(c({},this.$route.query),{},{page:this.currentPage})}).catch((function(){}))}},methods:{getList:function(t){var e,a=this;return(e=n.a.mark((function e(){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.loading=!0,e.next=3,a.call_api("get","user/orders?page=".concat(t));case 3:(r=e.sent).data.success?(a.orders=r.data.data,a.totalPages=r.data.meta.last_page,a.currentPage=r.data.meta.current_page):a.snack({message:a.$i18n.t("something_went_wrong"),color:"red"}),a.loading=!1;case 6:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function s(t){i(o,r,n,s,l,"next",t)}function l(t){i(o,r,n,s,l,"throw",t)}s(void 0)}))})()},openOrderDetails:function(t){this.$refs.orderDetails.open(t)}},created:function(){var t=this.$route.query.page||this.currentPage;this.getList(t)}},p=Object(s.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ps-lg-7 pt-4"},[a("h1",{staticClass:"fs-24 fw-700 opacity-80 mb-5 mt-3"},[t._v("\n        "+t._s(t.$t("purchase_history"))+"\n    ")]),t._v(" "),a("div",[a("v-data-table",{staticClass:"border px-4 pt-3",attrs:{headers:t.headers,items:t.orders,"loading-text":t.$t("loading_please_wait"),"hide-default-footer":"",loading:t.loading},scopedSlots:t._u([{key:"item.details",fn:function(e){var r=e.item;return[a("span",{staticClass:"d-block fw-600"},[t._v(t._s(r.code))]),t._v(" "),a("span",{staticClass:"opacity-50 fs-13 fw-600"},[t._v(t._s(r.date))])]}},{key:"item.grand_total",fn:function(e){var r=e.item;return[a("span",{staticClass:"d-block fw-600"},[t._v(t._s(t.format_price(r.grand_total)))])]}},{key:"item.options",fn:function(e){var r=e.item;return[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.hover;return[a("v-btn",{class:[n?"green white--text":"grey lighten-4 green--text","rounded"],attrs:{fab:"","x-small":"",elevation:"0",title:t.$t("view_details")},on:{click:function(e){return t.openOrderDetails(r)}}},[a("v-icon",{staticClass:"fs-18"},[t._v("la-bars")])],1)]}}],null,!0)})]}}],null,!0)}),t._v(" "),a("DetailsDialog",{ref:"orderDetails"}),t._v(" "),t.totalPages>1?a("div",{staticClass:"text-start"},[a("v-pagination",{staticClass:"my-4",attrs:{length:t.totalPages,"prev-icon":"la-angle-left","next-icon":"la-angle-right","total-visible":7,elevation:"0"},on:{input:t.getList},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1):t._e()],1)])}),[],!1,null,null,null);e.default=p.exports}}]);