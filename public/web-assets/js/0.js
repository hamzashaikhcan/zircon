(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{qbkU:function(t,e,s){"use strict";var i=s("o0o1"),a=s.n(i),r={props:{orderDetails:{type:Object,default:{}}},data:function(){return{}},computed:{steps:function(){return[{level:this.$i18n.t("order_placed"),status:"order_placed"},{level:this.$i18n.t("confirmed"),status:"confirmed"},{level:this.$i18n.t("processed"),status:"processed"},{level:this.$i18n.t("shipped"),status:"shipped"},{level:this.$i18n.t("delivered"),status:"delivered"}]}},methods:{getLevel:function(t){return"cancelled"==this.orderDetails.delivery_status?this.$i18n.t("cancelled"):t},getCancelStatus:function(){return"cancelled"!=this.orderDetails.delivery_status},getCurrentStatus:function(){var t=this;return this.steps.findIndex((function(e){return e.status==t.orderDetails.delivery_status}))+2},getStepStatus:function(t){var e=this,s=this.steps.findIndex((function(t){return t.status==e.orderDetails.delivery_status}));return this.steps.findIndex((function(e){return e.status==t}))<=s}}},n=s("KHd+"),l=Object(n.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.is_empty_obj(t.orderDetails)?t._e():s("v-stepper",{staticClass:"order-steps mb-4 mb-sm-0",attrs:{elevation:"0",value:t.getCurrentStatus(),"alt-labels":""}},[s("v-stepper-header",[t._l(t.steps,(function(e,i){return[s("v-stepper-step",{key:i+"-step",attrs:{step:i+1,complete:t.getStepStatus(e.status),"complete-icon":"la-check","error-icon":"la-times",rules:[t.getCancelStatus],color:"green"}},[t._v("\n                "+t._s(t.getLevel(e.level))+"\n            ")]),t._v(" "),i!==t.steps.length-1?s("v-divider",{key:i,class:[{complete:t.getStepStatus(e.status)}]}):t._e()]}))],2)],1)}),[],!1,null,null,null).exports;function o(t,e,s,i,a,r,n){try{var l=t[r](n),o=l.value}catch(t){return void s(t)}l.done?e(o):Promise.resolve(o).then(i,a)}function c(t){return function(){var e=this,s=arguments;return new Promise((function(i,a){var r=t.apply(e,s);function n(t){o(r,i,a,n,l,"next",t)}function l(t){o(r,i,a,n,l,"throw",t)}n(void 0)}))}}var d={name:"ReviewDialog",data:function(){return{dialog:!1,submitting:!1,productId:null,product:null,hasOldReview:!1,review:{rating:null,comment:null},options:{color:"grey lighten-3",width:800,zIndex:200}}},validations:{review:{comment:{required:s("ta7f").required}}},computed:{commentErrors:function(){var t=[];return this.$v.review.comment.$dirty?(!this.$v.review.comment.required&&t.push(this.$i18n.t("this_field_is_required")),t):t}},methods:{open:function(t){this.dialog=!0,this.hasOldReview=!1,this.product=null,this.review.rating=null,this.review.comment=null,this.productId=t,t&&this.getReviewStatus(t)},getReviewStatus:function(t){var e=this;return c(a.a.mark((function s(){var i;return a.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.call_api("get","user/review/check/".concat(t));case 2:(i=s.sent).data.success?(e.product=i.data.product,e.review=i.data.oldReview,i.data.oldReview.rating?e.hasOldReview=!0:e.review.rating=5):e.snack({message:i.data.message});case 4:case"end":return s.stop()}}),s)})))()},submit:function(){var t=this;return c(a.a.mark((function e(){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$v.review.$touch(),!t.$v.review.$anyError){e.next=3;break}return e.abrupt("return");case 3:return t.review.product_id=t.productId,t.submitting=!0,e.next=7,t.call_api("post","user/review/submit",t.review);case 7:(s=e.sent).data.success?t.snack({message:s.data.message}):t.snack({message:s.data.message,color:"red"}),t.submitting=!1,t.dialog=!1;case 11:case"end":return e.stop()}}),e)})))()},close:function(){this.dialog=!1}}},v={name:"ConfirmDialog",data:function(){return{dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"grey lighten-3",width:400,zIndex:200,noconfirm:!1}}},methods:{open:function(t,e,s){var i=this;return this.dialog=!0,this.title=t,this.message=e,this.options=Object.assign(this.options,s),new Promise((function(t,e){i.resolve=t,i.reject=e}))},agree:function(){this.resolve(!0),this.dialog=!1},cancel:function(){this.resolve(!1),this.dialog=!1}}};function u(t,e,s,i,a,r,n){try{var l=t[r](n),o=l.value}catch(t){return void s(t)}l.done?e(o):Promise.resolve(o).then(i,a)}var _={components:{ReviewDialog:Object(n.a)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{style:{zIndex:t.options.zIndex},attrs:{"max-width":t.options.width,scrollable:""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.close.apply(null,arguments)}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",{staticClass:"fs-16 fw-600",class:t.options.color},[t._v("\n            "+t._s(t.$t("rate_and_review_purchased_product"))+"\n            "),s("button",{staticClass:"ms-auto",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}},[s("i",{staticClass:"la la-close fs-20"})])]),t._v(" "),s("v-card-text",{staticClass:"pa-4 black--text"},[t.productId?s("div",[t.product?s("div",{staticClass:"px-5 py-4"},[t.hasOldReview?s("v-alert",{attrs:{dense:"",text:"",icon:"la-info-circle",type:"info"}},[t._v("\n                        "+t._s(t.$t("youve_already_reviewed_this_product_you_can_update_the_review"))+"\n                    ")]):t._e(),t._v(" "),s("v-form",[s("div",[t._v(t._s(t.$t("rating")))]),t._v(" "),s("v-rating",{attrs:{"empty-icon":"las la-star","full-icon":"las la-star active","half-icon":"las la-star half half","background-color":"",hover:"",length:"5",size:"32"},model:{value:t.review.rating,callback:function(e){t.$set(t.review,"rating",e)},expression:"review.rating"}}),t._v(" "),s("div",{staticClass:"mt-3"},[t._v(t._s(t.$t("comment")))]),t._v(" "),s("v-textarea",{attrs:{"error-messages":t.commentErrors,"hide-details":"auto",outlined:""},model:{value:t.review.comment,callback:function(e){t.$set(t.review,"comment",e)},expression:"review.comment"}})],1)],1):s("div",{staticClass:"h-270px"})]):s("div",{staticClass:"text-center fs-15 py-4"},[t._v("\n                "+t._s(t.$t("this_product_is_not_available"))+"\n            ")])]),t._v(" "),s("v-card-actions",{staticClass:"pt-3"},[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{color:"grey darken-3",text:""},nativeOn:{click:function(e){return t.close.apply(null,arguments)}}},[t._v(t._s(t.$t("close")))]),t._v(" "),s("v-btn",{staticClass:"px-5",attrs:{color:"primary",elevation:"0",loading:t.submitting,disabled:t.submitting},nativeOn:{click:function(e){return t.submit.apply(null,arguments)}}},[t._v(t._s(t.$t("submit")))])],1)],1)],1)}),[],!1,null,null,null).exports,Steps:l,ConfirmDialog:Object(n.a)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{style:{zIndex:t.options.zIndex},attrs:{"max-width":t.options.width},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancel.apply(null,arguments)}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:t.options.color,dense:"",flat:""}},[s("v-toolbar-title",{},[t._v(t._s(t.title))])],1),t._v(" "),s("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!t.message,expression:"!!message"}],staticClass:"pa-4 black--text",domProps:{innerHTML:t._s(t.message)}}),t._v(" "),s("v-card-actions",{staticClass:"pt-3"},[s("v-spacer"),t._v(" "),t.options.noconfirm?t._e():s("v-btn",{attrs:{color:"grey darken-3",text:""},nativeOn:{click:function(e){return t.cancel.apply(null,arguments)}}},[t._v(t._s(t.$t("no")))]),t._v(" "),s("v-btn",{attrs:{color:"primary",elevation:"0"},nativeOn:{click:function(e){return t.agree.apply(null,arguments)}}},[t._v(t._s(t.$t("yes")))])],1)],1)],1)}),[],!1,null,null,null).exports},props:{orderDetails:{type:Object,default:function(){}}},data:function(){return{cod_sticker:Vue.helpers.asset("/assets/img/cod_sticker.svg"),paid_sticker:Vue.helpers.asset("/assets/img/paid_sticker.svg")}},computed:{order:{get:function(){return this.orderDetails},set:function(t){}},headers:function(){var t=[{text:"#",align:"start",sortable:!1,value:"serial"},{text:this.$i18n.t("product"),sortable:!1,value:"product"},{text:this.$i18n.t("quantity"),sortable:!1,value:"quantity"},{text:this.$i18n.t("unit_price"),sortable:!1,value:"unit_price"},{text:this.$i18n.t("total"),sortable:!1,align:"end",value:"total"}];return"delivered"==this.order.delivery_status&&t.push({text:"",align:"end",sortable:!1,value:"review"}),t}},methods:{openReviewDialog:function(t){this.$refs.submitReview.open(t)},cancelOrder:function(t){var e=this;this.$refs.confirmCancel.open(this.$i18n.t("confirm_cancel"),this.$i18n.t("are_you_sure_you_want_to_cancel_this_order")).then((function(s){s&&e.cancelConfirmed(t.id)}))},cancelConfirmed:function(t){var e,s=this;return(e=a.a.mark((function e(){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.snack({message:s.$i18n.t("cancelling_order"),timeout:-1}),e.next=3,s.call_api("get","user/order/cancel/".concat(t));case 3:(i=e.sent).data.success?(s.snack({message:i.data.message}),s.order.delivery_status="cancelled"):s.snack({message:i.data.message,color:"red"});case 5:case"end":return e.stop()}}),e)})),function(){var t=this,s=arguments;return new Promise((function(i,a){var r=e.apply(t,s);function n(t){u(r,i,a,n,l,"next",t)}function l(t){u(r,i,a,n,l,"throw",t)}n(void 0)}))})()}}},p={components:{OrderPackage:Object(n.a)(_,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.is_addon_activated("multi_vendor")?s("div",{staticClass:"grey lighten-4 border border-gray-200 pa-4 rounded d-flex justify-space-between align-center"},[s("span",{staticClass:"fs-16 fw-700 lh-1"},[t._v(t._s(t.order.shop.name))]),t._v(" "),s("span",{staticClass:"text-end"},[s("router-link",{staticClass:"text-reset",attrs:{to:{name:"ShopDetails",params:{slug:t.order.shop.slug}}}},[t._v(t._s(t.order.shop.name))]),t._v(" "),"order_placed"==t.order.delivery_status&&"unpaid"==t.order.payment_status?s("div",{staticClass:"fs-12 red--text c-pointer",on:{click:function(e){return t.cancelOrder(t.order)}}},[t._v(t._s(t.$t("cancel_order")))]):t._e()],1)]):s("div",{staticClass:"grey lighten-4 border border-gray-200 pa-4 rounded d-flex justify-space-between align-center"},[s("span",{staticClass:"fs-16 fw-700 lh-1"},[t._v(t._s(t.$t("order_details")))]),t._v(" "),"order_placed"==t.order.delivery_status&&"unpaid"==t.order.payment_status?s("div",{staticClass:"fs-12 red--text c-pointer",on:{click:function(e){return t.cancelOrder(t.order)}}},[t._v(t._s(t.$t("cancel_order")))]):t._e()]),t._v(" "),s("Steps",{attrs:{"order-details":t.order}}),t._v(" "),s("div",{staticClass:"py-5"},[s("v-data-table",{attrs:{headers:t.headers,items:t.order.products.data,"hide-default-footer":"","mobile-breakpoint":"750"},scopedSlots:t._u([{key:"item.serial",fn:function(e){var i=e.item;return[s("span",{staticClass:"d-block fw-600"},[t._v(t._s(t.order.products.data.indexOf(i)+1))])]}},{key:"item.product",fn:function(e){var i=e.item;return[s("div",{staticClass:"d-flex align-center"},[s("img",{staticClass:"size-70px flex-shrink-0",attrs:{src:i.thumbnail,alt:i.name},on:{error:function(e){return t.imageFallback(e)}}}),t._v(" "),s("div",{staticClass:"flex-grow-1 ms-4"},[s("div",{staticClass:"text-truncate-2"},[t._v(t._s(i.name))]),t._v(" "),i.combinations.length>0?s("div",{},t._l(i.combinations,(function(e,i){return s("span",{key:i,staticClass:"me-4 py-1 fs-12"},[s("span",{staticClass:"opacity-70"},[t._v(t._s(e.attribute))]),t._v(" : "),s("span",{staticClass:"fw-500"},[t._v(t._s(e.value))])])})),0):t._e()])])]}},{key:"item.quantity",fn:function(e){var i=e.item;return[s("span",{staticClass:"d-block fw-600"},[t._v(t._s(i.quantity))])]}},{key:"item.unit_price",fn:function(e){var i=e.item;return[s("span",{staticClass:"d-block fw-600"},[t._v(t._s(t.format_price(i.price+i.tax)))])]}},{key:"item.total",fn:function(e){var i=e.item;return[s("span",{staticClass:"d-block fw-600"},[t._v(t._s(t.format_price(i.total)))])]}},"delivered"==t.order.delivery_status?{key:"item.review",fn:function(e){var i=e.item;return[s("v-btn",{staticClass:"px-2 text-primary",attrs:{text:"",small:""},on:{click:function(e){return t.openReviewDialog(i.id)}}},[t._v("\n                    "+t._s(t.$t("write_a_review"))+"\n                ")])]}}:null],null,!0)})],1),t._v(" "),s("v-row",{staticClass:"mb-5"},[s("v-col",{attrs:{xl:"7",md:"6",cols:"12",order:"2","order-md":"1"}},["paid"==t.order.payment_status?s("div",{staticClass:"mt-5 ms-lg-5"},[s("img",{attrs:{src:t.paid_sticker}})]):"cash_on_delivery"==t.order.payment_type?s("div",{staticClass:"mt-5 ms-lg-5"},[s("img",{attrs:{src:t.cod_sticker}})]):t._e()]),t._v(" "),s("v-col",{attrs:{xl:"5",md:"6",cols:"12",order:"1","order-md":"2"}},[s("v-list",{attrs:{dense:""}},[s("v-list-item",{staticClass:"fw-700"},[s("v-list-item-content",[t._v(t._s(t.$t("sub_total"))+" :")]),t._v(" "),s("v-list-item-content",{staticClass:"align-end col-4 justify-end"},[t._v(t._s(t.format_price(t.order.subtotal)))])],1),t._v(" "),s("v-list-item",{staticClass:"fw-700"},[s("v-list-item-content",[t._v(t._s(t.$t("tax"))+" :")]),t._v(" "),s("v-list-item-content",{staticClass:"align-end col-4 justify-end"},[t._v(t._s(t.format_price(t.order.tax)))])],1),t._v(" "),s("v-list-item",{staticClass:"fw-700"},[s("v-list-item-content",[t._v(t._s(t.$t("shipping_charge"))+" :")]),t._v(" "),s("v-list-item-content",{staticClass:"align-end col-4 justify-end"},[t._v(t._s(t.format_price(t.order.shipping_cost)))])],1),t._v(" "),s("v-list-item",{staticClass:"fw-700"},[s("v-list-item-content",[t._v(t._s(t.$t("coupon_discount"))+" :")]),t._v(" "),s("v-list-item-content",{staticClass:"align-end col-4 justify-end"},[t._v(t._s(t.format_price(t.order.coupon_discount)))])],1)],1),t._v(" "),s("div",{staticClass:"grey lighten-4 border border-gray-200 rounded"},[s("v-list-item",{staticClass:"fw-700"},[s("v-list-item-content",[t._v(t._s(t.$t("total"))+" :")]),t._v(" "),s("v-list-item-content",{staticClass:"align-end col-4 justify-end px-0"},[t._v(t._s(t.format_price(t.order.grand_total)))])],1)],1)],1)],1),t._v(" "),s("review-dialog",{ref:"submitReview"}),t._v(" "),s("ConfirmDialog",{ref:"confirmCancel"})],1)}),[],!1,null,null,null).exports},props:{orderDetails:{type:Object,default:function(){}}}},m=Object(n.a)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return!t.is_empty_obj(t.orderDetails)&&t.orderDetails.orders.length>0?s("div",[s("div",{staticClass:"grey lighten-4 border border-gray-200 pa-4 rounded fs-18 fw-700 lh-1"},[t._v(t._s(t.$t("order_summary")))]),t._v(" "),s("v-row",{staticClass:"mb-3"},[s("v-col",{staticClass:"pb-0 pb-md-3",attrs:{md:"6",cols:"12"}},[s("v-list",{attrs:{dense:""}},[s("v-list-item",[s("v-list-item-content",{staticClass:"fw-700"},[t._v(t._s(t.$t("order_code"))+" :")]),t._v(" "),s("v-list-item-content",{staticClass:"align-end"},[t._v(t._s(t.orderDetails.code))])],1),t._v(" "),s("v-list-item",[s("v-list-item-content",{staticClass:"fw-700"},[t._v(t._s(t.$t("name"))+" :")]),t._v(" "),s("v-list-item-content",{staticClass:"align-end"},[t._v(t._s(t.orderDetails.user.name))])],1),t._v(" "),s("v-list-item",[s("v-list-item-content",{staticClass:"fw-700"},[t._v(t._s(t.$t("email"))+" :")]),t._v(" "),s("v-list-item-content",{staticClass:"align-end"},[t._v(t._s(t.orderDetails.user.email))])],1),t._v(" "),s("v-list-item",[s("v-list-item-content",{staticClass:"fw-700 align-self-baseline"},[t._v(t._s(t.$t("shipping_address"))+" :")]),t._v(" "),s("v-list-item-content",{staticClass:"align-end"},[s("span",{staticClass:"d-block lh-1-6"},[t._v(t._s(t.orderDetails.shipping_address.address)+", "+t._s(t.orderDetails.shipping_address.postal_code))]),t._v(" "),s("span",{staticClass:"d-block lh-1-6"},[t._v(t._s(t.orderDetails.shipping_address.city)+", "+t._s(t.orderDetails.shipping_address.state)+", "+t._s(t.orderDetails.shipping_address.country))]),t._v(" "),s("span",{staticClass:"lh-1-6"},[t._v(t._s(t.orderDetails.shipping_address.phone))])])],1)],1)],1),t._v(" "),s("v-col",{staticClass:"pt-0 pt-md-3",attrs:{md:"6",cols:"12"}},[s("v-list",{attrs:{dense:""}},[s("v-list-item",[s("v-list-item-content",{staticClass:"fw-700"},[t._v(t._s(t.$t("total_order_amount"))+" :")]),t._v(" "),s("v-list-item-content",{staticClass:"align-end"},[t._v(t._s(t.format_price(t.orderDetails.grand_total)))])],1),t._v(" "),s("v-list-item",[s("v-list-item-content",{staticClass:"fw-700"},[t._v(t._s(t.$t("payment_method"))+" :")]),t._v(" "),s("v-list-item-content",{staticClass:"align-end text-capitalize"},[t._v(t._s(t.$t(t.orderDetails.orders[0].payment_type)))])],1),t._v(" "),s("v-list-item",[s("v-list-item-content",{staticClass:"fw-700"},[t._v(t._s(t.$t("delivery_type"))+" :")]),t._v(" "),s("v-list-item-content",{staticClass:"align-end text-capitalize"},[t._v(t._s(t.orderDetails.orders[0].delivery_type.replaceAll("_"," ")))])],1),t._v(" "),s("v-list-item",[s("v-list-item-content",{staticClass:"fw-700 align-self-baseline"},[t._v(t._s(t.$t("billing_address"))+" :")]),t._v(" "),s("v-list-item-content",{staticClass:"align-end"},[s("span",{staticClass:"d-block lh-1-6"},[t._v(t._s(t.orderDetails.billing_address.address)+", "+t._s(t.orderDetails.billing_address.postal_code))]),t._v(" "),s("span",{staticClass:"d-block lh-1-6"},[t._v(t._s(t.orderDetails.billing_address.city)+", "+t._s(t.orderDetails.billing_address.state)+", "+t._s(t.orderDetails.billing_address.country))]),t._v(" "),s("span",{staticClass:"lh-1-6"},[t._v(t._s(t.orderDetails.billing_address.phone))])])],1)],1)],1)],1),t._v(" "),t._l(t.orderDetails.orders,(function(t,e){return s("v-sheet",{key:e,attrs:{color:"white",elevation:"0"}},[s("order-package",{attrs:{"order-details":t}})],1)}))],2):t._e()}),[],!1,null,null,null);e.a=m.exports}}]);